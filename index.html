<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SMALLTOWN</title>
    <link href="https://fonts.googleapis.com/css2?family=Dosis:wght@500&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@300&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="main.css">
    <style>
        .carousel-container {
            display: none; 
            position: absolute;
            top: 10%;
            left: 20%;
            transform: translateX(-50%);
            width: 420px;
            background: rgba(255, 255, 255, 0.95);
            box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            z-index: 10;
            overflow: hidden;
        }

        .carousel {
            display: flex;
            transition: transform 0.5s ease-in-out;
        }

        .carousel-item {
            min-width: 320px;
            text-align: center;
            padding: 20px;
        }

        .carousel-item img {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            margin-bottom: 10px;
        }

        .carousel-item h3 {
            margin: 5px 0;
            font-size: 18px;
        }

        .carousel-item p {
            font-size: 14px;
            color: #555;
        }

        .carousel-controls {
            display: flex;
            justify-content: space-between;
            padding: 10px;
        }

        .carousel-controls button {
            background: #6200ea;
            color: white;
            border: none;
            border-radius: 5px;
            padding: 5px 10px;
            cursor: pointer;
        }

        #visit-places-button {
            position: absolute;
            top: 9em; 
            left: 2.75em;
            z-index: 2;
            padding: 10px 15px;
            background: #6200ea;
            color: white;
            border: none;
            border-radius: 5px;
            font-family: 'Dosis', sans-serif;
            cursor: pointer;
        }
    </style>
</head>

<body>
    <button id="about-button"></button>
    <button id="seed-button">Tree</button>
    <button id="day-night-toggle"></button>
    <button id="visit-places-button">Visit Places</button>
    <input type="range" id="growth-slider" min="1" max="5" value="1" style="position: absolute; top: 8em; right: 2.75em; z-index: 2;" />

    <div id="about" class="">
        <div class="popup">
            <div class="inner">
                <h1>Smalltown</h1>
                <div class="description">
                    <p>Smalltown</p>
                    <p>Made with: Three.js <br>Models by SketchFab</p>
                </div>
                <div class="footer">
                    <p class="small">
                        Made by FPS team, for a Computer Graphics homework.
                        <ul>
                            <li>5025221051: Pelangi Masita Wati</li>
                            <li>5025221302: Muhammad Fahmi Syahputra</li>
                            <li>5025221256: Aryasatya Wiryawan</li>
                        </ul>
                    </p>
                </div>
                <div class="close" id="about-close">Close</div>
            </div>
        </div>
    </div>

    <div id="carousel-container" class="carousel-container">
        <div id="carousel" class="carousel">
            <div class="carousel-item">
                <img src="https://via.placeholder.com/100" alt="Supermarket">
                <h3>Supermarket</h3>
                <p>Buy groceries and essentials</p>
            </div>
            <div class="carousel-item">
                <img src="https://via.placeholder.com/100" alt="Bus Station">
                <h3>Bus Station</h3>
                <p>Travel around the town</p>
                <button onclick="window.location.href='./busStation/index.html'" style="margin-top: 10px; padding: 5px 10px; background-color: #6200ea; color: white; border: none; border-radius: 5px; cursor: pointer;">Visit Bus Station</button>
            </div>
            <div class="carousel-item">
                <img src="https://via.placeholder.com/100" alt="Park">
                <h3>Park</h3>
                <p>Relax and enjoy nature</p>
            </div>
            <div class="carousel-item">
                <img src="https://via.placeholder.com/100" alt="Pizza">
                <h3>Pizza Place</h3>
                <p>Relax and enjoy nature</p>
            </div>
        </div>
        <div class="carousel-controls">
            <button id="prev-btn">Prev</button>
            <button id="next-btn">Next</button>
        </div>
    </div>

    <canvas id="c" style="width: 100vw; height: 100vh; display: block;"></canvas>

    <script src="js/three.js"></script>
    <script src="js/GLTFLoader.js"></script>
    <script src="js/OrbitControls.js"></script>
    <script src="js/main.js"></script> 

    <script>
        const visitPlacesButton = document.getElementById('visit-places-button');
        const carouselContainer = document.getElementById('carousel-container');
        const carousel = document.getElementById('carousel');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');

        let currentIndex = 0;

        // Toggle Carousel Visibility
        visitPlacesButton.addEventListener('click', () => {
            carouselContainer.style.display = carouselContainer.style.display === 'none' ? 'block' : 'none';
        });

        function updateCarousel() {
            const totalItems = document.querySelectorAll('.carousel-item').length; // Count all items
            const offset = -currentIndex * 420; // Adjust width based on item size
            carousel.style.transform = `translateX(${offset}px)`;
        
            // Wrap around if the index is out of bounds
            if (currentIndex < 0) {
                currentIndex = totalItems - 1;
            } else if (currentIndex >= totalItems) {
                currentIndex = 0;
            }
        }
        
        prevBtn.addEventListener('click', () => {
            currentIndex--;
            updateCarousel();
        });
        
        nextBtn.addEventListener('click', () => {
            currentIndex++;
            updateCarousel();
        });

        // Initialize Carousel to First Item
        updateCarousel();
    </script>
</body>

</html>